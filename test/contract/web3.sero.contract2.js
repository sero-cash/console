var Web3 = require("../../lib/web3");
var web3 = new Web3(new Web3.providers.HttpProvider("http://127.0.0.1:8545"))
var ticketContract = web3.sero.contract([{"constant":false,"inputs":[{"name":"category","type":"string"}],"name":"len","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"category","type":"string"}],"name":"allotTicket","outputs":[{"name":"","type":"bytes32"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"},{"name":"","type":"uint256"}],"name":"tickets","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"","type":"bytes32"},{"indexed":false,"name":"","type":"bytes32"}],"name":"Log","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"","type":"bytes32"}],"name":"Key","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"","type":"bytes32"}],"name":"Value","type":"event"}]);
var ticket = ticketContract.new(
    {
        from: web3.sero.accounts[0],
        data: '0x60806040527f9320811d9313524221768f9849e3dd0797b44f6947ba7e0b7ef92773d63f38f66000557f0e5f0478abd739d6711fcb7e4a1c40466a92f2e2822d26b15105d726d05c1acf6001557f7b3ec2ce4a9fe17ec098b5386d2196852dfe337b3c0e831839ff1c0714980e926002557f5e4d6bef095a26cb74c8fea1cb715cc5aa2a13ed774d2f0c99a6d316bdcffaf56003557f061875c141e218c8b26beabe41857c50d29de0ddec1211793e558c9160cdb6346004557f3292e82c5e52a4e2989c12cbb38e3834acd39c8a7f0565c2e95a37a2bffed5736005557f3ec5a2cefed15bd3b91fb4dff8287400560ed8995734b8b72a35f49579eaf8a46006557f4a0e6f6c4c86b700b0d632371d2c270dabca931f7291059bcd2ccd00f4aaadb660075534801561013057600080fd5b5061050c806101406000396000f3006080604052600436106100565763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663026294a7811461012e5780634faf0d4414610199578063d1b2991f146101e5575b600060606000610064610200565b9250821561012957610074610212565b9150816040518082805190602001908083835b602083106100a65780518252601f199092019160209182019101610087565b51815160001960209485036101000a0190811690199190911617905260408051949092018490038420600081815260088352838120805460018101825590825290839020018a905580855290840189905281519096507fb83c6712efdbb3a31b22116338169e2a8599fa8d44aa9f6e53950fa684cd982195509283900301925050a15b505050005b34801561013a57600080fd5b506040805160206004803580820135601f810184900484028501840190955284845261018794369492936024939284019190819084018382808284375094975061022e9650505050505050565b60408051918252519081900360200190f35b6040805160206004803580820135601f81018490048402850184019095528484526101879436949293602493928401919081908401838280828437509497506102a29650505050505050565b3480156101f157600080fd5b50610187600435602435610447565b600060065460206080a1506080515b90565b6040805160208101825260008152600554909182919082a15090565b600080826040518082805190602001908083835b602083106102615780518252601f199092019160209182019101610242565b51815160209384036101000a600019018019909216911617905260408051929094018290039091206000908152600890915291909120549695505050505050565b600080600080846040518082805190602001908083835b602083106102d85780518252601f1990920191602091820191016102b9565b51815160209384036101000a60001901801990921691161790526040805192909401829003822080835293519398507f63477955f5c506226aa570ac3165ddb5e760fe0c871d3890ef7708e146a1674295509083900301925050a1600083815260086020526040902054915081156104325760008381526008602052604090208054600019840190811061036857fe5b600091825260208083209091015485835260089091526040909120805491925090600019840190811061039757fe5b6000918252602080832090910182905584825260089052604090206000198301906103c29082610499565b506040805182815290517f1fff24cda4028912f2aab7319b8226cd695f5726224a5f67117d5d3698547a809181900360200190a1604080518481526020810183905281517fb83c6712efdbb3a31b22116338169e2a8599fa8d44aa9f6e53950fa684cd9821929181900390910190a15b61043e81600087610477565b95945050505050565b60086020528160005260406000208181548110151561046257fe5b90600052602060002001600091509150505481565b600081846040820152836060820152600354608082a160600151949350505050565b8154818355818111156104bd576000838152602090206104bd9181019083016104c2565b505050565b61020f91905b808211156104dc57600081556001016104c8565b50905600a165627a7a72305820a20d9e5bf8dcd3854d86f632ef6f0c8645283e0507fc5c5ec9230f2fa193bfc20029',
        gas: '4700000'
    }, function (e, contract){
        console.log(e, contract);
        if (typeof contract.address !== 'undefined') {
            console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
        }
    })